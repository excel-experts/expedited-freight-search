<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Orders - Expedited Freight</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-brand">
                <h2>üöö Expedited Freight</h2>
            </div>
            <div class="nav-menu">
                <a href="dashboard.html" class="nav-link active">Search Orders</a>
                <!--<a href="admin-users.html" class="nav-link" id="userMgmtLink" style="display: none;">User Management</a>-->
                <a href="admin-data.html" class="nav-link" id="dataMgmtLink" style="display: none;">Data Management</a>
                <span class="nav-user" id="userEmail"></span>
                <button class="btn btn-secondary btn-sm" id="logoutBtn">Logout</button>
            </div>
        </div>
    </nav>

    <main class="container">
        <div class="page-header">
            <h1>Historical Orders Search</h1>
            <p>Search through past shipments by origin, destination, and carrier</p>
        </div>

        <div class="search-card">
            <form id="searchForm" class="search-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="pickupBusiness">Pickup Business Name</label>
                        <input type="text" id="pickupBusiness" name="pickupBusiness" placeholder="Pickup Name Here">
                    </div>

                    <div class="form-group">
                        <label for="deliveryBusiness">Delivery Business Name</label>
                        <input type="text" id="deliveryBusiness" name="deliveryBusiness" placeholder="Delivery Name Here">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="originCity">Origin City</label>
                        <input type="text" id="originCity" name="originCity" placeholder="e.g., Los Angeles, CA">
                    </div>

                    <div class="form-group">
                        <label for="destinationCity">Destination City</label>
                        <input type="text" id="destinationCity" name="destinationCity" placeholder="e.g., New York, NY">
                    </div>

                    <div class="form-group">
                        <label for="carrier">Carrier</label>
                        <input type="text" id="carrier" name="carrier" placeholder="e.g., ABC Transport">
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        üîç Search Orders
                    </button>
                    <button type="button" class="btn btn-secondary" id="clearBtn">
                        Clear
                    </button>
                </div>
            </form>
        </div>

        <div id="resultsSection" style="display: none;">
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-label">Total Records</div>
                    <div class="metric-value" id="totalRecords">0</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Average Price</div>
                    <div class="metric-value" id="avgPrice">$0</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Average Distance</div>
                    <div class="metric-value" id="avgDistance">0 mi</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Avg Price/Mile</div>
                    <div class="metric-value" id="avgPricePerMile">$0</div>
                </div>
            </div>

            <div class="results-header">
                <h2>Search Results</h2>
                <button class="btn btn-secondary btn-sm" id="exportBtn">
                    üì• Export to CSV
                </button>
            </div>

            <div class="table-container">
                <table class="data-table" id="resultsTable">
                    <thead>
                        <tr>
                            <th>Order ID</th>
                            <th class="sortable" data-column="pickup_business">Pickup Business</th>
                            <th class="sortable" data-column="delivery_business">Delivery Business</th>
                            <th class="sortable" data-column="origin_city">Origin City</th>
                            <th class="sortable" data-column="destination_city">Destination City</th>
                            <th class="sortable" data-column="carrier">Carrier</th>
                            <th class="sortable" data-column="price">Price</th>
                            <th class="sortable" data-column="distance">Distance (mi)</th>
                            <th class="sortable" data-column="price_per_mile">Price/Mile</th>
                            <th class="sortable" data-column="order_date">Order Date</th>
                        </tr>
                    </thead>
                    <tbody id="resultsBody">
                    </tbody>
                </table>
            </div>

            <div class="pagination" id="pagination">
                <button class="btn btn-secondary btn-sm" id="prevBtn" disabled>Previous</button>
                <span id="pageInfo">Page 1</span>
                <button class="btn btn-secondary btn-sm" id="nextBtn" disabled>Next</button>
            </div>
        </div>

        <div id="noResults" style="display: none;" class="no-results">
            <p>No orders found matching your search criteria.</p>
        </div>

        <div id="loadingResults" style="display: none;" class="loading-message">
            Searching orders...
        </div>
    </main>

    <script type="module" src="js/config.js"></script>
    <script type="module" src="js/search.js"></script>
</body>
</html>